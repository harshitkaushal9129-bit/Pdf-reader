<!DOCTYPE html>
<html>
<head>
    <title>Upload to Realtime DB</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
</head>
<body style="font-family: sans-serif; text-align: center; padding: 50px;">

    <h2>Upload PDF to Realtime Database</h2>
    <input type="file" id="pdfInput" accept="application/pdf">
    <button onclick="uploadToDB()">Upload String</button>
    <p id="status"></p>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAcmK0aCHIgLuFGRPm82GL-hEnLS8JjuKY",
            authDomain: "pdf-reader-650f5.firebaseapp.com",
            projectId: "pdf-reader-650f5",
            databaseURL: "https://pdf-reader-650f5-default-rtdb.firebaseio.com", // Apni URL check karein
            storageBucket: "pdf-reader-650f5.firebasestorage.app",
            messagingSenderId: "163058397387",
            appId: "1:163058397387:web:4cc94d2921706d1bf16b4e"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        function uploadToDB() {
            const file = document.getElementById('pdfInput').files[0];
            const status = document.getElementById('status');

            if (!file) return alert("Select a file!");
            
            // File size check (RTDB limit ~10MB)
            if (file.size > 5 * 1024 * 1024) return alert("File too big for Realtime DB! Keep it under 5MB.");

            const reader = new FileReader();
            status.innerText = "Converting & Uploading...";

            reader.onload = function(e) {
                const base64String = e.target.result;
                
                // Database mein save karein
                database.ref('sharedPDF').set({
                    pdfData: base64String,
                    name: file.name,
                    timestamp: Date.now()
                }).then(() => {
                    status.innerText = "Uploaded to DB! Open viewer.html now.";
                }).catch(err => {
                    console.error(err);
                    status.innerText = "Error: " + err.message;
                });
            };
            reader.readAsDataURL(file); // Convert PDF to Base64
        }
    </script>
</body>
</html>
